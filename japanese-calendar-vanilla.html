<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Êó•Êú¨„ÅÆ„Ç´„É¨„É≥„ÉÄ„ÉºÊôÇË®à</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e3a8a 50%, #0f172a 100%);
            color: white;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0;
            overflow: hidden;
        }

        .container {
            width: 100%;
            max-width: 640px;
            padding: 4px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .panel {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(12px);
            border-radius: 12px;
            padding: 8px;
            margin-bottom: 4px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* ÊôÇÂàªË°®Á§∫ */
        .time-display {
            text-align: center;
            padding: 2px 0;
        }

        .time {
            font-size: 5.4rem;
            font-weight: bold;
            font-family: 'Courier New', monospace;
            letter-spacing: 0.1em;
            margin-bottom: 0;
        }

        .date {
            font-size: 1.5rem;
            margin-bottom: 1px;
        }

        .japanese-era {
            color: #93c5fd;
        }

        .weekday {
            color: #fde047;
            margin-left: 8px;
        }

        .holiday-today {
            font-size: 0.875rem;
            color: #f87171;
            font-weight: bold;
            margin-top: 1px;
        }

        /* „Ç´„Ç¶„É≥„Éà„ÉÄ„Ç¶„É≥Ë°®Á§∫ */
        .countdown-section {
            margin-top: 4px;
            padding: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 6px;
        }

        .next-meeting-title {
            font-size: 0.75rem;
            color: #93c5fd;
            margin-bottom: 2px;
            display: none;
        }

        .countdown-time {
            font-size: 1.125rem;
            font-weight: bold;
            color: #fde047;
            margin-bottom: 2px;
            display: none;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 2px;
            display: none;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #60a5fa);
            transition: width 0.3s ease;
            display: none;
        }

        .meeting-info {
            font-size: 0.7rem;
            color: #cbd5e1;
            display: none;
        }

        /* „Ç´„É¨„É≥„ÉÄ„Éº */
        .calendar-header {
            display: flex;
            align-items: center;
            gap: 4px;
            margin-bottom: 4px;
        }

        .calendar-header h2 {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .calendar-header h3 {
            font-size: 1.65rem;
            font-weight: 600;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 1px;
        }

        .calendar-grid.small {
            gap: 0;
        }

        .weekday-header {
            text-align: center;
            font-weight: 600;
            padding: 1px;
            font-size: 1.2rem;
        }

        .weekday-header.small {
            padding: 0;
            font-size: 0.5rem;
        }

        .weekday-header.sunday {
            color: #f87171;
        }

        .weekday-header.saturday {
            color: #60a5fa;
        }

        .calendar-day {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            font-weight: 500;
            transition: all 0.3s;
            cursor: pointer;
            min-height: 32px;
            padding: 1px;
        }

        .calendar-day.small {
            min-height: 18px;
            padding: 0;
            font-size: 0.65rem;
            border-radius: 2px;
        }

        .calendar-day:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .calendar-day.other-month {
            opacity: 0.3;
        }

        .calendar-day.today {
            background: #2563eb;
            box-shadow: 0 10px 15px -3px rgba(37, 99, 235, 0.5);
            transform: scale(1.05);
        }

        .day-number {
            font-size: 2.5rem;
        }

        .day-number.small {
            font-size: 1.5rem;
        }

        .day-number.sunday {
            color: #fca5a5;
        }

        .day-number.saturday {
            color: #93c5fd;
        }

        .day-number.holiday {
            color: #f87171;
            font-weight: bold;
        }

        .holiday-name {
            font-size: 7px;
            color: #fca5a5;
            text-align: center;
            line-height: 1;
            margin-top: 1px;
        }

        /* Êú¨Êó•„ÅÆ‰∫àÂÆö„Éë„Éç„É´ */
        .schedule-panel {
            background: rgba(0, 0, 0, 0.25);
            padding: 8px;
            display: none;
 
        }

        .schedule-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 6px;
        }

        .schedule-title {
            font-size: 0.875rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .add-schedule-btn {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.875rem;
            cursor: pointer;
            transition: background 0.2s;
        }

        .add-schedule-btn:hover {
            background: #2563eb;
        }

        .schedule-list {
            max-height: 120px;
            overflow-y: auto;
        }

        .schedule-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 6px 8px;
            margin-bottom: 4px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
            font-size: 0.875rem;
        }

        .schedule-item.past {
            opacity: 0.5;
            text-decoration: line-through;
        }

        .schedule-item.next {
            background: rgba(59, 130, 246, 0.2);
            border: 1px solid rgba(59, 130, 246, 0.5);
        }

        .schedule-time {
            font-weight: bold;
            color: #93c5fd;
            margin-right: 8px;
            font-size: 0.9rem;
        }

        .schedule-title-text {
            flex: 1;
        }

        .delete-btn {
            background: none;
            border: none;
            color: #ef4444;
            cursor: pointer;
            padding: 2px 4px;
            font-size: 0.875rem;
        }

        .delete-btn:hover {
            color: #f87171;
        }

        /* ‰∫àÂÆöËøΩÂä†„Éï„Ç©„Éº„É† */
        .add-schedule-form {
            display: none;
            padding: 6px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 4px;
            margin-bottom: 6px;
        }

        .form-row {
            display: flex;
            gap: 6px;
            margin-bottom: 6px;
        }

        .form-input {
            flex: 1;
            padding: 4px 6px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            color: white;
            font-size: 0.8rem;
        }

        .form-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .form-buttons {
            display: flex;
            gap: 4px;
        }

        .form-btn {
            flex: 1;
            padding: 4px;
            border: none;
            border-radius: 4px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: opacity 0.2s;
        }

        .form-btn:hover {
            opacity: 0.8;
        }

        .save-btn {
            background: #22c55e;
            color: white;
        }

        .cancel-btn {
            background: #64748b;
            color: white;
        }

        /* „É°„Ç§„É≥„Ç´„É¨„É≥„ÉÄ„Éº */
        .main-calendar {
            flex: 1;
            min-height: 0;
            overflow: auto;
            display: flex;
            flex-direction: column;
        }

        #current-calendar {
            flex: 1;
            min-height: 0;
        }

        /* Â∞è„Åï„ÅÑ„Ç´„É¨„É≥„ÉÄ„Éº„Ç≥„É≥„ÉÜ„Éä */
        .small-calendars-container {
            display: flex;
            gap: 2px;
        }

        .small-calendar {
            flex: 1;
            background: rgba(0, 0, 0, 0.2);
            padding: 3px;
            border-radius: 6px;
        }

        .small-calendar .calendar-header {
            margin-bottom: 1px;
        }

        .small-calendar h3 {
            font-size: 1.2rem;
        }

        /* „Çπ„ÇØ„É≠„Éº„É´„Éê„Éº */
        .schedule-list::-webkit-scrollbar {
            width: 4px;
        }

        .schedule-list::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
        }

        .schedule-list::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 2px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ÁèæÂú®Êó•ÊôÇË°®Á§∫ -->
        <div class="panel" style="padding: 6px;">
            <div class="time-display">
                <div class="time" id="current-time"></div>
                <div class="date" id="current-date"></div>
                <div class="holiday-today" id="holiday-today"></div>
            </div>
        </div>

        <!-- „É°„Ç§„É≥„Ç´„É¨„É≥„ÉÄ„Éº -->
        <div class="panel main-calendar" style="padding: 6px;">
            <div class="calendar-header">
                <h2 id="current-month-title"></h2>
            </div>
            <div id="current-calendar"></div>
        </div>

        <!-- ÂÖàÊúà„ÉªÁøåÊúà„Ç´„É¨„É≥„ÉÄ„Éº -->
        <div class="panel" style="padding: 3px;">
            <div class="small-calendars-container">
                <div class="small-calendar">
                    <div class="calendar-header">
                        <h3 id="prev-month-title"></h3>
                    </div>
                    <div id="prev-calendar"></div>
                </div>
                <div class="small-calendar">
                    <div class="calendar-header">
                        <h3 id="next-month-title"></h3>
                    </div>
                    <div id="next-calendar"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Êó•Êú¨„ÅÆÁ•ùÊó•
        const holidays = {
            // 2025Âπ¥
            '2025-1-1': 'ÂÖÉÊó•',
            '2025-1-13': 'Êàê‰∫∫„ÅÆÊó•',
            '2025-2-11': 'Âª∫ÂõΩË®òÂøµ„ÅÆÊó•',
            '2025-2-23': 'Â§©ÁöáË™ïÁîüÊó•',
            '2025-2-24': 'ÊåØÊõø‰ºëÊó•',
            '2025-3-20': 'Êò•ÂàÜ„ÅÆÊó•',
            '2025-4-29': 'Êò≠Âíå„ÅÆÊó•',
            '2025-5-3': 'ÊÜ≤Ê≥ïË®òÂøµÊó•',
            '2025-5-4': '„Åø„Å©„Çä„ÅÆÊó•',
            '2025-5-5': '„Åì„Å©„ÇÇ„ÅÆÊó•',
            '2025-5-6': 'ÊåØÊõø‰ºëÊó•',
            '2025-7-21': 'Êµ∑„ÅÆÊó•',
            '2025-8-11': 'Â±±„ÅÆÊó•',
            '2025-9-15': 'Êï¨ËÄÅ„ÅÆÊó•',
            '2025-9-23': 'ÁßãÂàÜ„ÅÆÊó•',
            '2025-10-13': '„Çπ„Éù„Éº„ÉÑ„ÅÆÊó•',
            '2025-11-3': 'ÊñáÂåñ„ÅÆÊó•',
            '2025-11-23': 'Âã§Âä¥ÊÑüË¨ù„ÅÆÊó•',
            '2025-11-24': 'ÊåØÊõø‰ºëÊó•',
            // 2026Âπ¥
            '2026-1-1': 'ÂÖÉÊó•',
            '2026-1-12': 'Êàê‰∫∫„ÅÆÊó•',
            '2026-2-11': 'Âª∫ÂõΩË®òÂøµ„ÅÆÊó•',
            '2026-2-23': 'Â§©ÁöáË™ïÁîüÊó•',
            '2026-3-20': 'Êò•ÂàÜ„ÅÆÊó•',
            '2026-4-29': 'Êò≠Âíå„ÅÆÊó•',
            '2026-5-3': 'ÊÜ≤Ê≥ïË®òÂøµÊó•',
            '2026-5-4': '„Åø„Å©„Çä„ÅÆÊó•',
            '2026-5-5': '„Åì„Å©„ÇÇ„ÅÆÊó•',
            '2026-5-6': 'ÊåØÊõø‰ºëÊó•',
            '2026-7-20': 'Êµ∑„ÅÆÊó•',
            '2026-8-11': 'Â±±„ÅÆÊó•',
            '2026-9-21': 'Êï¨ËÄÅ„ÅÆÊó•',
            '2026-9-22': 'ÂõΩÊ∞ë„ÅÆ‰ºëÊó•',
            '2026-9-23': 'ÁßãÂàÜ„ÅÆÊó•',
            '2026-10-12': '„Çπ„Éù„Éº„ÉÑ„ÅÆÊó•',
            '2026-11-3': 'ÊñáÂåñ„ÅÆÊó•',
            '2026-11-23': 'Âã§Âä¥ÊÑüË¨ù„ÅÆÊó•'
        };

        const weekDays = ['Êó•', 'Êúà', 'ÁÅ´', 'Ê∞¥', 'Êú®', 'Èáë', 'Âúü'];
        const months = ['1Êúà', '2Êúà', '3Êúà', '4Êúà', '5Êúà', '6Êúà', '7Êúà', '8Êúà', '9Êúà', '10Êúà', '11Êúà', '12Êúà'];

        // ÊõúÊó•Âà•ÂÆö‰æã‰ºöË≠∞
        const weeklyMeetings = {
            'Êúà': [
                {time: '09:00', title: 'ÈÄ±Ê¨°ÂÆö‰æã‰ºö'},
                {time: '14:00', title: 'Âñ∂Ê•≠‰ºöË≠∞'}
            ],
            'ÁÅ´': [
                {time: '10:30', title: '„Éó„É≠„Ç∏„Çß„ÇØ„ÉàÈÄ≤Êçó'},
                {time: '16:00', title: '„ÉÅ„Éº„É†MTG'}
            ],
            'Ê∞¥': [
                {time: '13:00', title: 'ÈÉ®ÈñÄ‰ºöË≠∞'}
            ],
            'Êú®': [
                {time: '11:00', title: '‰ºÅÁîª„É¨„Éì„É•„Éº'},
                {time: '15:30', title: 'ÈñãÁô∫ÂÆö‰æã'}
            ],
            'Èáë': [
                {time: '10:00', title: 'ÈÄ±Ê¨°ÊåØ„ÇäËøî„Çä'},
                {time: '17:00', title: 'ÈÄ±Â†±‰ΩúÊàê'}
            ]
        };

        // Êú¨Êó•„ÅÆ‰∫àÂÆö„Çí‰øùÂ≠òÔºà„É°„É¢„É™ÂÜÖ„ÅÆ„ÅøÔºâ
        let todaySchedules = [];
        let customSchedules = []; // ÊâãÂãïËøΩÂä†„Åó„Åü‰∫àÂÆö

        // ÂíåÊö¶„ÇíË®àÁÆó
        function getJapaneseEra(date) {
            const year = date.getFullYear();
            if (year >= 2019) {
                return `‰ª§Âíå${year - 2018}Âπ¥`;
            } else if (year >= 1989) {
                return `Âπ≥Êàê${year - 1988}Âπ¥`;
            }
            return '';
        }

        // Êó•‰ªò„Çí„Éï„Ç©„Éº„Éû„ÉÉ„Éà
        function formatDateKey(date) {
            const year = date.getFullYear();
            const month = date.getMonth() + 1;
            const day = date.getDate();
            return `${year}-${month}-${day}`;
        }

        // „Ç´„É¨„É≥„ÉÄ„Éº„ÅÆÊó•‰ªò„ÇíÁîüÊàê
        function generateCalendarDays(targetDate) {
            const year = targetDate.getFullYear();
            const month = targetDate.getMonth();
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const startDate = new Date(firstDay);
            startDate.setDate(startDate.getDate() - firstDay.getDay());

            const days = [];
            const current = new Date(startDate);

            while (current <= lastDay || current.getDay() !== 0) {
                days.push(new Date(current));
                current.setDate(current.getDate() + 1);
            }

            return days;
        }

        // „Ç´„É¨„É≥„ÉÄ„Éº„ÇíÊèèÁîª
        function renderCalendar(containerId, targetDate, isMain = true) {
            const container = document.getElementById(containerId);
            if (!container) {
                console.error('„Ç≥„É≥„ÉÜ„Éä„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì:', containerId);
                return;
            }
            
            const days = generateCalendarDays(targetDate);
            const today = new Date();
            const currentMonth = targetDate.getMonth();

            let html = '<div class="calendar-grid' + (isMain ? '' : ' small') + '">';

            // ÊõúÊó•„Éò„ÉÉ„ÉÄ„Éº
            weekDays.forEach((day, index) => {
                let className = 'weekday-header' + (isMain ? '' : ' small');
                if (index === 0) className += ' sunday';
                if (index === 6) className += ' saturday';
                html += `<div class="${className}">${day}</div>`;
            });

            // Êó•‰ªò
            days.forEach(date => {
                const isInMonth = date.getMonth() === currentMonth;
                const isToday = isInMonth && 
                    date.getDate() === today.getDate() && 
                    date.getMonth() === today.getMonth() && 
                    date.getFullYear() === today.getFullYear();
                const dayOfWeek = date.getDay();
                const dateKey = formatDateKey(date);
                const holiday = holidays[dateKey];

                let dayClass = 'calendar-day' + (isMain ? '' : ' small');
                if (!isInMonth) dayClass += ' other-month';
                if (isToday) dayClass += ' today';

                let numberClass = 'day-number' + (isMain ? '' : ' small');
                if (!isInMonth) {
                    numberClass += ' other-month';
                } else if (holiday) {
                    numberClass += ' holiday';
                } else if (dayOfWeek === 0) {
                    numberClass += ' sunday';
                } else if (dayOfWeek === 6) {
                    numberClass += ' saturday';
                }

                html += `<div class="${dayClass}">
                    <span class="${numberClass}">${date.getDate()}</span>
                    ${holiday && isInMonth && isMain ? `<div class="holiday-name">${holiday}</div>` : ''}
                </div>`;
            });

            html += '</div>';
            container.innerHTML = html;
        }

        // ‰∫àÂÆö„ÅÆÂàùÊúüÂåñ
        function initializeSchedules() {
            const now = new Date();
            const weekday = weekDays[now.getDay()];
            
            // ÊõúÊó•Âà•ÂÆö‰æã‰ºöË≠∞„ÇíÂèñÂæó
            const weeklySchedules = weeklyMeetings[weekday] || [];
            
            // ÂÆö‰æã‰ºöË≠∞„Å®„Ç´„Çπ„Çø„É†‰∫àÂÆö„ÇíÁµêÂêà
            todaySchedules = [...weeklySchedules, ...customSchedules];
            
            // ÊôÇÂàªÈ†Ü„Å´„ÇΩ„Éº„Éà
            todaySchedules.sort((a, b) => a.time.localeCompare(b.time));
            
            updateScheduleList();
        }

        // ‰∫àÂÆö„É™„Çπ„Éà„ÅÆÊõ¥Êñ∞
        function updateScheduleList() {
            const list = document.getElementById('schedule-list');
            const now = new Date();
            const currentTime = `${String(now.getHours()).padStart(2, '0')}:${String(now.getMinutes()).padStart(2, '0')}`;
            
            let html = '';
            let nextSchedule = null;
            
            todaySchedules.forEach((schedule, index) => {
                const isPast = schedule.time < currentTime;
                const isNext = !isPast && !nextSchedule;
                
                if (isNext) {
                    nextSchedule = schedule;
                }
                
                let className = 'schedule-item';
                if (isPast) className += ' past';
                if (isNext) className += ' next';
                
                html += `
                    <div class="${className}">
                        <span class="schedule-time">${schedule.time}</span>
                        <span class="schedule-title-text">${schedule.title}</span>
                        <button class="delete-btn" onclick="deleteSchedule(${index})">√ó</button>
                    </div>
                `;
            });
            
            if (todaySchedules.length === 0) {
                html = '<div class="schedule-item" style="text-align: center; opacity: 0.5; font-size: 0.8rem;">‰∫àÂÆö„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</div>';
            }
            
            // „Ç´„Ç¶„É≥„Éà„ÉÄ„Ç¶„É≥„ÅÆÊõ¥Êñ∞
            updateCountdown(nextSchedule);
        }

        // „Ç´„Ç¶„É≥„Éà„ÉÄ„Ç¶„É≥„ÅÆÊõ¥Êñ∞
        function updateCountdown(nextSchedule) {
            const countdownSection = document.getElementById('countdown-section');
            
            if (!nextSchedule) {
                return;
            }
            
          
            const now = new Date();
            const [hours, minutes] = nextSchedule.time.split(':').map(Number);
            const meetingTime = new Date(now);
            meetingTime.setHours(hours, minutes, 0, 0);
            
            const diff = meetingTime - now;
            
            if (diff <= 0) {
                countdownSection.style.display = 'none';
                return;
            }
            
            const totalMinutes = Math.floor(diff / 60000);
            const hours_ = Math.floor(totalMinutes / 60);
            const minutes_ = totalMinutes % 60;
            const seconds = Math.floor((diff % 60000) / 1000);
            
        }

        // ‰∫àÂÆöËøΩÂä†„Éï„Ç©„Éº„É†„ÅÆË°®Á§∫ÂàáÊõø
        function toggleAddForm() {
            const form = document.getElementById('add-schedule-form');
            form.style.display = form.style.display === 'none' ? 'block' : 'none';
            
            if (form.style.display === 'block') {
                document.getElementById('schedule-time').focus();
            }
        }

        // ‰∫àÂÆö„ÅÆËøΩÂä†
        function addSchedule() {
            const timeInput = document.getElementById('schedule-time');
            const titleInput = document.getElementById('schedule-title');
            
            if (!timeInput.value || !titleInput.value) {
                alert('ÊôÇÂàª„Å®‰∫àÂÆöÂêç„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                return;
            }
            
            const newSchedule = {
                time: timeInput.value,
                title: titleInput.value
            };
            
            // „Ç´„Çπ„Çø„É†‰∫àÂÆö„Å´ËøΩÂä†
            customSchedules.push(newSchedule);
            
            // „É™„Çπ„Éà„Å´ËøΩÂä†
            todaySchedules.push(newSchedule);
            todaySchedules.sort((a, b) => a.time.localeCompare(b.time));
            
            // UI„É™„Çª„ÉÉ„Éà
            timeInput.value = '';
            titleInput.value = '';
            toggleAddForm();
            
            updateScheduleList();
        }

        // ‰∫àÂÆö„ÅÆÂâäÈô§
        function deleteSchedule(index) {
            const schedule = todaySchedules[index];
            
            // „Ç´„Çπ„Çø„É†‰∫àÂÆö„Åã„ÇâÂâäÈô§
            const customIndex = customSchedules.findIndex(s => 
                s.time === schedule.time && s.title === schedule.title
            );
            if (customIndex !== -1) {
                customSchedules.splice(customIndex, 1);
            }
            
            // ÂÖ®‰Ωì„É™„Çπ„Éà„Åã„ÇâÂâäÈô§
            todaySchedules.splice(index, 1);
            
            updateScheduleList();
        }

        // ÊôÇÂàª„ÇíÊõ¥Êñ∞
        function updateTime() {
            const now = new Date();
            
            // ÊôÇÂàª
            document.getElementById('current-time').textContent = now.toLocaleTimeString('ja-JP', {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });

            // Êó•‰ªò
            const dateElement = document.getElementById('current-date');
            const year = now.getFullYear();
            const month = now.getMonth() + 1;
            const date = now.getDate();
            const weekday = weekDays[now.getDay()];
            
            dateElement.innerHTML = `<span class="japanese-era">Ôºà${getJapaneseEra(now)}Ôºâ</span>${year}Âπ¥${month}Êúà${date}Êó•<span class="weekday">Ôºà${weekday}ÊõúÊó•Ôºâ</span>`;

            // ‰ªäÊó•„ÅÆÁ•ùÊó•
            const holidayKey = formatDateKey(now);
            const holidayToday = holidays[holidayKey];
            const holidayElement = document.getElementById('holiday-today');
            if (holidayToday) {
                holidayElement.textContent = `üéå ${holidayToday}`;
            } else {
                holidayElement.textContent = '';
            }

            // ‰∫àÂÆö„É™„Çπ„Éà„ÅÆÊõ¥Êñ∞ÔºàÈÅéÂéª„ÅÆ‰∫àÂÆö„Çí„Ç∞„É¨„Éº„Ç¢„Ç¶„Éà„Åô„Çã„Åü„ÇÅÔºâ
            updateScheduleList();
        }

        // „Ç´„É¨„É≥„ÉÄ„Éº„ÅÆ„Çø„Ç§„Éà„É´„ÇíÊõ¥Êñ∞
        function updateCalendarTitles() {
            const now = new Date();
            const prevMonth = new Date(now.getFullYear(), now.getMonth() - 1, 1);
            const nextMonth = new Date(now.getFullYear(), now.getMonth() + 1, 1);
            
            document.getElementById('current-month-title').textContent = 
                `${now.getFullYear()}Âπ¥ ${months[now.getMonth()]}`;
            
            // ÂÖàÊúà„ÅÆË°®Á§∫ÔºàÂπ¥„ÅåÁï∞„Å™„ÇãÂ†¥Âêà„ÅØÂπ¥„ÇÇË°®Á§∫Ôºâ
            if (prevMonth.getFullYear() !== now.getFullYear()) {
                document.getElementById('prev-month-title').textContent = 
                    `${prevMonth.getFullYear()}/${prevMonth.getMonth() + 1}`;
            } else {
                document.getElementById('prev-month-title').textContent = 
                    `${prevMonth.getMonth() + 1}Êúà`;
            }
            
            // ÁøåÊúà„ÅÆË°®Á§∫ÔºàÂπ¥„ÅåÁï∞„Å™„ÇãÂ†¥Âêà„ÅØÂπ¥„ÇÇË°®Á§∫Ôºâ
            if (nextMonth.getFullYear() !== now.getFullYear()) {
                document.getElementById('next-month-title').textContent = 
                    `${nextMonth.getFullYear()}/${nextMonth.getMonth() + 1}`;
            } else {
                document.getElementById('next-month-title').textContent = 
                    `${nextMonth.getMonth() + 1}Êúà`;
            }
        }

        // ÂàùÊúüÂåñ„Å®Êõ¥Êñ∞
        function init() {
            // ÁèæÂú®„ÅÆÊó•ÊôÇ„ÇíÂèñÂæó
            const now = new Date();
            let currentDay = now.getDate();
            
            updateTime();
            updateCalendarTitles();
            initializeSchedules();
            
            const prevMonth = new Date(now.getFullYear(), now.getMonth() - 1, 1);
            const nextMonth = new Date(now.getFullYear(), now.getMonth() + 1, 1);
            
            renderCalendar('current-calendar', now, true);
            renderCalendar('prev-calendar', prevMonth, false);
            renderCalendar('next-calendar', nextMonth, false);
            
            // ÊØéÁßíÊôÇÂàª„ÇíÊõ¥Êñ∞
            setInterval(updateTime, 1000);
            
            // ÊØéÂàÜ„Ç´„É¨„É≥„ÉÄ„Éº„ÇíÊõ¥Êñ∞ÔºàÊó•‰ªò„ÅåÂ§â„Çè„Å£„ÅüÊôÇ„ÅÆ„Åü„ÇÅÔºâ
            setInterval(() => {
                const currentNow = new Date();
                const currentPrevMonth = new Date(currentNow.getFullYear(), currentNow.getMonth() - 1, 1);
                const currentNextMonth = new Date(currentNow.getFullYear(), currentNow.getMonth() + 1, 1);
                
                // Êó•‰ªò„ÅåÂ§â„Çè„Å£„Åü„Çâ„Ç´„Çπ„Çø„É†‰∫àÂÆö„Çí„É™„Çª„ÉÉ„Éà
                if (currentNow.getDate() !== currentDay) {
                    currentDay = currentNow.getDate();
                    customSchedules = [];
                }
                
                updateCalendarTitles();
                renderCalendar('current-calendar', currentNow, true);
                renderCalendar('prev-calendar', currentPrevMonth, false);
                renderCalendar('next-calendar', currentNextMonth, false);
                initializeSchedules();
            }, 60000);
        }

        // „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÊôÇ„Å´ÂàùÊúüÂåñ
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>