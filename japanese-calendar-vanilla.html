<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Êó•Êú¨„ÅÆ„Ç´„É¨„É≥„ÉÄ„ÉºÊôÇË®à</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* „Ç¢„ÇØ„Çª„Ç∑„Éì„É™„ÉÜ„Ç£: „Éï„Ç©„Éº„Ç´„ÇπË°®Á§∫ */
        :focus-visible {
            outline: 2px solid #fde047;
            outline-offset: 2px;
        }

        button:focus:not(:focus-visible) {
            outline: none;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e3a8a 50%, #0f172a 100%);
            color: white;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0;
            overflow: hidden;
        }

        .container {
            width: 100%;
            max-width: 1100px;
            padding: 4px;
            display: grid;
            grid-template-columns: 1fr;
            grid-template-rows: auto auto;
            gap: 4px;
            overflow: hidden;
        }

        /* „Éá„Çπ„ÇØ„Éà„ÉÉ„Éó: 3„Ç´„É©„É†„É¨„Ç§„Ç¢„Ç¶„Éà (180px | 1fr | 180px) */
        @media (min-width: 768px) {
            .container {
                grid-template-columns: 180px 1fr 180px;
                grid-template-rows: auto auto;
            }

            /* „Éù„É¢„Éâ„Éº„É≠„Çµ„Ç§„Éâ„Éê„Éº: Â∑¶Á´Ø„ÄÅ2Ë°å„Çπ„Éë„É≥ */
            .pomodoro-sidebar {
                grid-column: 1;
                grid-row: 1 / 3;
            }

            /* ÊôÇË®à„Éë„Éç„É´: ‰∏≠Â§Æ‰∏ä */
            .time-panel {
                grid-column: 2;
                grid-row: 1;
            }

            /* „É°„Ç§„É≥„Ç´„É¨„É≥„ÉÄ„Éº: ‰∏≠Â§Æ‰∏ã */
            .main-calendar {
                grid-column: 2;
                grid-row: 2;
            }

            /* Â∞è„Ç´„É¨„É≥„ÉÄ„Éº: Âè≥Á´Ø„ÄÅ2Ë°å„Çπ„Éë„É≥ */
            .small-calendars-panel {
                grid-column: 3;
                grid-row: 1 / 3;
            }
        }

        @media (max-width: 767px) {
            .pomodoro-sidebar {
                order: -1;
            }
        }

        .panel {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(12px);
            border-radius: 12px;
            padding: 8px;
            margin-bottom: 4px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* ÊôÇÂàªË°®Á§∫ */
        .time-display {
            text-align: center;
            padding: 2px 0;
        }

        .time-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        /* „Ç¢„Éä„É≠„Ç∞ÊôÇË®à */
        .analog-clock {
            width: 140px;
            height: 140px;
            flex-shrink: 0;
        }

        .analog-clock svg {
            width: 100%;
            height: 100%;
        }

        .clock-face {
            fill: rgba(255, 255, 255, 0.05);
            stroke: rgba(255, 255, 255, 0.3);
            stroke-width: 2;
        }

        .clock-center {
            fill: #fde047;
        }

        .hour-hand {
            stroke: #ffffff;
            stroke-width: 4;
            stroke-linecap: round;
        }

        .minute-hand {
            stroke: rgba(255, 255, 255, 0.85);
            stroke-width: 2.5;
            stroke-linecap: round;
        }

        .second-hand {
            stroke: #fde047;
            stroke-width: 1.5;
            stroke-linecap: round;
        }

        .hour-marker {
            stroke: rgba(255, 255, 255, 0.7);
            stroke-width: 2.5;
        }

        .minute-marker {
            stroke: rgba(255, 255, 255, 0.35);
            stroke-width: 1.5;
        }

        .digital-section {
            text-align: center;
        }

        /* „Éù„É¢„Éâ„Éº„É≠„Çø„Ç§„Éû„ÉºÔºàÂ∑¶„Çµ„Ç§„Éâ„Éê„Éº„ÉªÂÜÜÂΩ¢„Éó„É≠„Ç∞„É¨„Çπ‰ªò„ÅçÔºâ */
        .pomodoro-sidebar {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px 8px;
            gap: 10px;
        }

        .pomodoro-header {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .pomodoro-title {
            font-size: 0.85rem;
            font-weight: 600;
            color: #93c5fd;
            white-space: nowrap;
        }

        .pomodoro-count {
            font-size: 0.7rem;
            color: #fde047;
            margin-top: 2px;
        }

        /* ÂÜÜÂΩ¢„Éó„É≠„Ç∞„É¨„Çπ„É™„É≥„Ç∞ */
        .pomodoro-ring {
            position: relative;
            width: 110px;
            height: 110px;
        }

        .pomodoro-ring svg {
            transform: rotate(-90deg);
            width: 100%;
            height: 100%;
        }

        .ring-bg {
            fill: none;
            stroke: rgba(255, 255, 255, 0.1);
            stroke-width: 8;
        }

        .ring-progress {
            fill: none;
            stroke: #f97316;
            stroke-width: 8;
            stroke-linecap: round;
            stroke-dasharray: 251;
            stroke-dashoffset: 0;
            transition: stroke-dashoffset 0.5s ease, stroke 0.3s ease;
        }

        .ring-progress.work { stroke: #f97316; }
        .ring-progress.break { stroke: #22d3ee; }
        .ring-progress.long-break { stroke: #a78bfa; }

        .pomodoro-time-inner {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }

        .pomodoro-time {
            font-size: 1.4rem;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            color: white;
            line-height: 1;
        }

        .pomodoro-phase {
            font-size: 0.65rem;
            color: #94a3b8;
            margin-top: 4px;
            font-weight: 500;
        }

        .pomodoro-phase.work { color: #f97316; }
        .pomodoro-phase.break { color: #22d3ee; }
        .pomodoro-phase.long-break { color: #a78bfa; }

        /* ÊôÇÈñìÈÅ∏Êäû„Éú„Çø„É≥ */
        .time-presets {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4px;
            width: 100%;
        }

        .preset-btn {
            padding: 6px 4px;
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 4px;
            background: transparent;
            color: rgba(255,255,255,0.7);
            font-size: 0.7rem;
            cursor: pointer;
            transition: all 0.2s;
            min-height: 32px;
        }

        .preset-btn:hover, .preset-btn.active {
            background: rgba(249, 115, 22, 0.3);
            border-color: #f97316;
            color: white;
        }

        .pomodoro-controls {
            display: flex;
            flex-direction: column;
            gap: 6px;
            width: 100%;
        }

        .pomodoro-btn {
            padding: 10px 12px;
            min-height: 40px;
            border: none;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            width: 100%;
        }

        .pomodoro-btn.start {
            background: #22c55e;
            color: white;
        }

        .pomodoro-btn.pause {
            background: #f59e0b;
            color: white;
        }

        .pomodoro-btn.reset {
            background: #64748b;
            color: white;
        }

        .pomodoro-btn:hover {
            opacity: 0.9;
            transform: scale(1.02);
        }

        .pomodoro-btn:active {
            transform: scale(0.98);
        }

        .pomodoro-notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.95);
            padding: 28px 52px;
            border-radius: 16px;
            text-align: center;
            z-index: 1000;
            display: none;
            animation: pulse 0.5s ease-in-out infinite alternate;
            border: 2px solid rgba(253, 224, 71, 0.3);
        }

        @keyframes pulse {
            from { box-shadow: 0 0 20px rgba(253, 224, 71, 0.5); }
            to { box-shadow: 0 0 40px rgba(253, 224, 71, 0.8); }
        }

        .pomodoro-notification h3 {
            font-size: 1.5rem;
            color: #fde047;
            margin-bottom: 8px;
        }

        .pomodoro-notification p {
            color: white;
            margin-bottom: 12px;
        }

        .time {
            font-size: 4.6rem;
            font-weight: bold;
            font-family: 'Courier New', monospace;
            letter-spacing: 0.1em;
            margin-bottom: 0;
        }

        .date {
            font-size: 1.3rem;
            margin-bottom: 1px;
        }

        .japanese-era {
            color: #93c5fd;
        }

        .weekday {
            color: #fde047;
            margin-left: 8px;
        }

        .holiday-today {
            font-size: 0.875rem;
            color: #f87171;
            font-weight: bold;
            margin-top: 1px;
        }

        /* „Ç´„É¨„É≥„ÉÄ„Éº */
        .calendar-header {
            display: flex;
            align-items: center;
            gap: 4px;
            margin-bottom: 4px;
        }

        .calendar-header h2 {
            font-size: 1.3rem;
            font-weight: bold;
        }

        .calendar-header h3 {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 1px;
        }

        .calendar-grid.small {
            gap: 0;
        }

        .weekday-header {
            text-align: center;
            font-weight: 600;
            padding: 1px;
            font-size: 1.0rem;
        }

        .weekday-header.small {
            padding: 1px;
            font-size: 0.6rem;
        }

        .weekday-header.sunday {
            color: #f87171;
        }

        .weekday-header.saturday {
            color: #60a5fa;
        }

        .calendar-day {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            font-weight: 500;
            transition: all 0.2s;
            cursor: pointer;
            min-height: 32px;
            padding: 2px;
        }

        .calendar-day.small {
            min-height: 20px;
            padding: 1px;
            font-size: 0.65rem;
            border-radius: 2px;
        }

        .calendar-day:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .calendar-day:focus {
            outline: 2px solid #fde047;
            outline-offset: 1px;
        }

        .calendar-day.other-month {
            opacity: 0.3;
        }

        .calendar-day.today {
            background: #2563eb;
            box-shadow: 0 10px 15px -3px rgba(37, 99, 235, 0.5);
            transform: scale(1.05);
        }

        .day-number {
            font-size: 2.1rem;
        }

        .day-number.small {
            font-size: 1.1rem;
        }

        .day-number.sunday {
            color: #fca5a5;
        }

        .day-number.saturday {
            color: #93c5fd;
        }

        .day-number.holiday {
            color: #f87171;
            font-weight: bold;
        }

        .holiday-name {
            font-size: 7px;
            color: #fca5a5;
            text-align: center;
            line-height: 1;
            margin-top: 1px;
        }

        /* „É°„Ç§„É≥„Ç´„É¨„É≥„ÉÄ„Éº */
        .main-calendar {
            flex: 1;
            min-height: 0;
            overflow: auto;
            display: flex;
            flex-direction: column;
        }

        #current-calendar {
            flex: 1;
            min-height: 0;
        }

        /* Â∞è„Åï„ÅÑ„Ç´„É¨„É≥„ÉÄ„Éº„Ç≥„É≥„ÉÜ„Éä */
        .small-calendars-container {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .small-calendar {
            flex: 1;
            background: rgba(0, 0, 0, 0.2);
            padding: 4px;
            border-radius: 6px;
        }

        .small-calendar .calendar-header {
            margin-bottom: 2px;
        }

        .small-calendar h3 {
            font-size: 0.9rem;
        }

        /* „Çπ„ÇØ„É≠„Éº„É´„Éê„Éº */
        ::-webkit-scrollbar {
            width: 4px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 2px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- „Éù„É¢„Éâ„Éº„É≠„Çµ„Ç§„Éâ„Éê„ÉºÔºàÂ∑¶Á´Ø„Éª2Ë°å„Çπ„Éë„É≥Ôºâ -->
        <div class="panel pomodoro-sidebar">
            <div class="pomodoro-header">
                <span class="pomodoro-title">üçÖ „Éù„É¢„Éâ„Éº„É≠</span>
                <span class="pomodoro-count" id="pomodoro-count">ÂÆå‰∫Ü: 0</span>
            </div>
            <!-- ÂÜÜÂΩ¢„Éó„É≠„Ç∞„É¨„Çπ„É™„É≥„Ç∞ -->
            <div class="pomodoro-ring">
                <svg viewBox="0 0 100 100">
                    <circle class="ring-bg" cx="50" cy="50" r="40"/>
                    <circle class="ring-progress work" id="ring-progress" cx="50" cy="50" r="40"/>
                </svg>
                <div class="pomodoro-time-inner">
                    <div class="pomodoro-time" id="pomodoro-time">25:00</div>
                    <div class="pomodoro-phase work" id="pomodoro-phase">üî• ‰ΩúÊ•≠</div>
                </div>
            </div>
            <!-- ÊôÇÈñìÈÅ∏Êäû„Éú„Çø„É≥ -->
            <div class="time-presets">
                <button class="preset-btn" onclick="setPresetTime(15)">15ÂàÜ</button>
                <button class="preset-btn active" onclick="setPresetTime(25)">25ÂàÜ</button>
                <button class="preset-btn" onclick="setPresetTime(45)">45ÂàÜ</button>
                <button class="preset-btn" onclick="setPresetTime(60)">60ÂàÜ</button>
            </div>
            <div class="pomodoro-controls">
                <button class="pomodoro-btn start" id="pomodoro-start" onclick="togglePomodoro()">ÈñãÂßã</button>
                <button class="pomodoro-btn reset" onclick="resetPomodoro()">„É™„Çª„ÉÉ„Éà</button>
            </div>
        </div>

        <!-- ÁèæÂú®Êó•ÊôÇË°®Á§∫Ôºà‰∏≠Â§Æ‰∏äÔºâ -->
        <div class="panel time-panel" style="padding: 6px;">
            <div class="time-display">
                <div class="time-container">
                    <!-- „Ç¢„Éä„É≠„Ç∞ÊôÇË®à -->
                    <div class="analog-clock">
                        <svg viewBox="0 0 100 100">
                            <circle class="clock-face" cx="50" cy="50" r="48"/>
                            <line class="hour-marker" x1="50" y1="6" x2="50" y2="14"/>
                            <line class="hour-marker" x1="94" y1="50" x2="86" y2="50"/>
                            <line class="hour-marker" x1="50" y1="94" x2="50" y2="86"/>
                            <line class="hour-marker" x1="6" y1="50" x2="14" y2="50"/>
                            <line class="minute-marker" x1="73" y1="10.2" x2="70" y2="15.4"/>
                            <line class="minute-marker" x1="89.8" y1="27" x2="84.6" y2="30"/>
                            <line class="minute-marker" x1="89.8" y1="73" x2="84.6" y2="70"/>
                            <line class="minute-marker" x1="73" y1="89.8" x2="70" y2="84.6"/>
                            <line class="minute-marker" x1="27" y1="89.8" x2="30" y2="84.6"/>
                            <line class="minute-marker" x1="10.2" y1="73" x2="15.4" y2="70"/>
                            <line class="minute-marker" x1="10.2" y1="27" x2="15.4" y2="30"/>
                            <line class="minute-marker" x1="27" y1="10.2" x2="30" y2="15.4"/>
                            <line class="hour-hand" id="hour-hand" x1="50" y1="50" x2="50" y2="26"/>
                            <line class="minute-hand" id="minute-hand" x1="50" y1="50" x2="50" y2="16"/>
                            <line class="second-hand" id="second-hand" x1="50" y1="50" x2="50" y2="12"/>
                            <circle class="clock-center" cx="50" cy="50" r="4"/>
                        </svg>
                    </div>
                    <!-- „Éá„Ç∏„Çø„É´ÊôÇË®à -->
                    <div class="digital-section">
                        <div class="time" id="current-time"></div>
                        <div class="date" id="current-date"></div>
                        <div class="holiday-today" id="holiday-today"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ÈÄöÁü•„Ç™„Éº„Éê„Éº„É¨„Ç§ -->
        <div class="pomodoro-notification" id="pomodoro-notification">
            <h3 id="notification-title">üçÖ ÂÆå‰∫ÜÔºÅ</h3>
            <p id="notification-message">„ÅäÁñ≤„Çå„Åï„Åæ„Åß„Åó„Åü</p>
            <button class="pomodoro-btn start" onclick="dismissNotification()">OK</button>
        </div>

        <!-- „É°„Ç§„É≥„Ç´„É¨„É≥„ÉÄ„ÉºÔºà‰∏≠Â§Æ‰∏ãÔºâ -->
        <div class="panel main-calendar" style="padding: 6px;">
            <div class="calendar-header">
                <h2 id="current-month-title"></h2>
            </div>
            <div id="current-calendar"></div>
        </div>

        <!-- ÂÖàÊúà„ÉªÁøåÊúà„Ç´„É¨„É≥„ÉÄ„ÉºÔºàÂè≥Á´Ø„Éª2Ë°å„Çπ„Éë„É≥Ôºâ -->
        <div class="panel small-calendars-panel" style="padding: 4px;">
            <div class="small-calendars-container">
                <div class="small-calendar">
                    <div class="calendar-header">
                        <h3 id="prev-month-title"></h3>
                    </div>
                    <div id="prev-calendar"></div>
                </div>
                <div class="small-calendar">
                    <div class="calendar-header">
                        <h3 id="next-month-title"></h3>
                    </div>
                    <div id="next-calendar"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Êó•Êú¨„ÅÆÁ•ùÊó•
        const holidays = {
            // 2025Âπ¥
            '2025-1-1': 'ÂÖÉÊó•',
            '2025-1-13': 'Êàê‰∫∫„ÅÆÊó•',
            '2025-2-11': 'Âª∫ÂõΩË®òÂøµ„ÅÆÊó•',
            '2025-2-23': 'Â§©ÁöáË™ïÁîüÊó•',
            '2025-2-24': 'ÊåØÊõø‰ºëÊó•',
            '2025-3-20': 'Êò•ÂàÜ„ÅÆÊó•',
            '2025-4-29': 'Êò≠Âíå„ÅÆÊó•',
            '2025-5-3': 'ÊÜ≤Ê≥ïË®òÂøµÊó•',
            '2025-5-4': '„Åø„Å©„Çä„ÅÆÊó•',
            '2025-5-5': '„Åì„Å©„ÇÇ„ÅÆÊó•',
            '2025-5-6': 'ÊåØÊõø‰ºëÊó•',
            '2025-7-21': 'Êµ∑„ÅÆÊó•',
            '2025-8-11': 'Â±±„ÅÆÊó•',
            '2025-9-15': 'Êï¨ËÄÅ„ÅÆÊó•',
            '2025-9-23': 'ÁßãÂàÜ„ÅÆÊó•',
            '2025-10-13': '„Çπ„Éù„Éº„ÉÑ„ÅÆÊó•',
            '2025-11-3': 'ÊñáÂåñ„ÅÆÊó•',
            '2025-11-23': 'Âã§Âä¥ÊÑüË¨ù„ÅÆÊó•',
            '2025-11-24': 'ÊåØÊõø‰ºëÊó•',
            // 2026Âπ¥
            '2026-1-1': 'ÂÖÉÊó•',
            '2026-1-12': 'Êàê‰∫∫„ÅÆÊó•',
            '2026-2-11': 'Âª∫ÂõΩË®òÂøµ„ÅÆÊó•',
            '2026-2-23': 'Â§©ÁöáË™ïÁîüÊó•',
            '2026-3-20': 'Êò•ÂàÜ„ÅÆÊó•',
            '2026-4-29': 'Êò≠Âíå„ÅÆÊó•',
            '2026-5-3': 'ÊÜ≤Ê≥ïË®òÂøµÊó•',
            '2026-5-4': '„Åø„Å©„Çä„ÅÆÊó•',
            '2026-5-5': '„Åì„Å©„ÇÇ„ÅÆÊó•',
            '2026-5-6': 'ÊåØÊõø‰ºëÊó•',
            '2026-7-20': 'Êµ∑„ÅÆÊó•',
            '2026-8-11': 'Â±±„ÅÆÊó•',
            '2026-9-21': 'Êï¨ËÄÅ„ÅÆÊó•',
            '2026-9-22': 'ÂõΩÊ∞ë„ÅÆ‰ºëÊó•',
            '2026-9-23': 'ÁßãÂàÜ„ÅÆÊó•',
            '2026-10-12': '„Çπ„Éù„Éº„ÉÑ„ÅÆÊó•',
            '2026-11-3': 'ÊñáÂåñ„ÅÆÊó•',
            '2026-11-23': 'Âã§Âä¥ÊÑüË¨ù„ÅÆÊó•',
            // 2027Âπ¥
            '2027-1-1': 'ÂÖÉÊó•',
            '2027-1-11': 'Êàê‰∫∫„ÅÆÊó•',
            '2027-2-11': 'Âª∫ÂõΩË®òÂøµ„ÅÆÊó•',
            '2027-2-23': 'Â§©ÁöáË™ïÁîüÊó•',
            '2027-3-21': 'Êò•ÂàÜ„ÅÆÊó•',
            '2027-3-22': 'ÊåØÊõø‰ºëÊó•',
            '2027-4-29': 'Êò≠Âíå„ÅÆÊó•',
            '2027-5-3': 'ÊÜ≤Ê≥ïË®òÂøµÊó•',
            '2027-5-4': '„Åø„Å©„Çä„ÅÆÊó•',
            '2027-5-5': '„Åì„Å©„ÇÇ„ÅÆÊó•',
            '2027-7-19': 'Êµ∑„ÅÆÊó•',
            '2027-8-11': 'Â±±„ÅÆÊó•',
            '2027-9-20': 'Êï¨ËÄÅ„ÅÆÊó•',
            '2027-9-23': 'ÁßãÂàÜ„ÅÆÊó•',
            '2027-10-11': '„Çπ„Éù„Éº„ÉÑ„ÅÆÊó•',
            '2027-11-3': 'ÊñáÂåñ„ÅÆÊó•',
            '2027-11-23': 'Âã§Âä¥ÊÑüË¨ù„ÅÆÊó•',
            // 2028Âπ¥
            '2028-1-1': 'ÂÖÉÊó•',
            '2028-1-10': 'Êàê‰∫∫„ÅÆÊó•',
            '2028-2-11': 'Âª∫ÂõΩË®òÂøµ„ÅÆÊó•',
            '2028-2-23': 'Â§©ÁöáË™ïÁîüÊó•',
            '2028-3-20': 'Êò•ÂàÜ„ÅÆÊó•',
            '2028-4-29': 'Êò≠Âíå„ÅÆÊó•',
            '2028-5-3': 'ÊÜ≤Ê≥ïË®òÂøµÊó•',
            '2028-5-4': '„Åø„Å©„Çä„ÅÆÊó•',
            '2028-5-5': '„Åì„Å©„ÇÇ„ÅÆÊó•',
            '2028-7-17': 'Êµ∑„ÅÆÊó•',
            '2028-8-11': 'Â±±„ÅÆÊó•',
            '2028-9-18': 'Êï¨ËÄÅ„ÅÆÊó•',
            '2028-9-22': 'ÁßãÂàÜ„ÅÆÊó•',
            '2028-10-9': '„Çπ„Éù„Éº„ÉÑ„ÅÆÊó•',
            '2028-11-3': 'ÊñáÂåñ„ÅÆÊó•',
            '2028-11-23': 'Âã§Âä¥ÊÑüË¨ù„ÅÆÊó•',
            // 2029Âπ¥
            '2029-1-1': 'ÂÖÉÊó•',
            '2029-1-8': 'Êàê‰∫∫„ÅÆÊó•',
            '2029-2-11': 'Âª∫ÂõΩË®òÂøµ„ÅÆÊó•',
            '2029-2-12': 'ÊåØÊõø‰ºëÊó•',
            '2029-2-23': 'Â§©ÁöáË™ïÁîüÊó•',
            '2029-3-20': 'Êò•ÂàÜ„ÅÆÊó•',
            '2029-4-29': 'Êò≠Âíå„ÅÆÊó•',
            '2029-4-30': 'ÊåØÊõø‰ºëÊó•',
            '2029-5-3': 'ÊÜ≤Ê≥ïË®òÂøµÊó•',
            '2029-5-4': '„Åø„Å©„Çä„ÅÆÊó•',
            '2029-5-5': '„Åì„Å©„ÇÇ„ÅÆÊó•',
            '2029-7-16': 'Êµ∑„ÅÆÊó•',
            '2029-8-11': 'Â±±„ÅÆÊó•',
            '2029-9-17': 'Êï¨ËÄÅ„ÅÆÊó•',
            '2029-9-23': 'ÁßãÂàÜ„ÅÆÊó•',
            '2029-9-24': 'ÊåØÊõø‰ºëÊó•',
            '2029-10-8': '„Çπ„Éù„Éº„ÉÑ„ÅÆÊó•',
            '2029-11-3': 'ÊñáÂåñ„ÅÆÊó•',
            '2029-11-23': 'Âã§Âä¥ÊÑüË¨ù„ÅÆÊó•',
            // 2030Âπ¥
            '2030-1-1': 'ÂÖÉÊó•',
            '2030-1-14': 'Êàê‰∫∫„ÅÆÊó•',
            '2030-2-11': 'Âª∫ÂõΩË®òÂøµ„ÅÆÊó•',
            '2030-2-23': 'Â§©ÁöáË™ïÁîüÊó•',
            '2030-3-20': 'Êò•ÂàÜ„ÅÆÊó•',
            '2030-4-29': 'Êò≠Âíå„ÅÆÊó•',
            '2030-5-3': 'ÊÜ≤Ê≥ïË®òÂøµÊó•',
            '2030-5-4': '„Åø„Å©„Çä„ÅÆÊó•',
            '2030-5-5': '„Åì„Å©„ÇÇ„ÅÆÊó•',
            '2030-5-6': 'ÊåØÊõø‰ºëÊó•',
            '2030-7-15': 'Êµ∑„ÅÆÊó•',
            '2030-8-11': 'Â±±„ÅÆÊó•',
            '2030-8-12': 'ÊåØÊõø‰ºëÊó•',
            '2030-9-16': 'Êï¨ËÄÅ„ÅÆÊó•',
            '2030-9-23': 'ÁßãÂàÜ„ÅÆÊó•',
            '2030-10-14': '„Çπ„Éù„Éº„ÉÑ„ÅÆÊó•',
            '2030-11-3': 'ÊñáÂåñ„ÅÆÊó•',
            '2030-11-4': 'ÊåØÊõø‰ºëÊó•',
            '2030-11-23': 'Âã§Âä¥ÊÑüË¨ù„ÅÆÊó•'
        };

        const weekDays = ['Êó•', 'Êúà', 'ÁÅ´', 'Ê∞¥', 'Êú®', 'Èáë', 'Âúü'];
        const months = ['1Êúà', '2Êúà', '3Êúà', '4Êúà', '5Êúà', '6Êúà', '7Êúà', '8Êúà', '9Êúà', '10Êúà', '11Êúà', '12Êúà'];

        // ÂíåÊö¶„ÇíË®àÁÆó
        function getJapaneseEra(date) {
            const year = date.getFullYear();
            if (year >= 2019) {
                return `‰ª§Âíå${year - 2018}Âπ¥`;
            } else if (year >= 1989) {
                return `Âπ≥Êàê${year - 1988}Âπ¥`;
            }
            return '';
        }

        // Êó•‰ªò„Çí„Éï„Ç©„Éº„Éû„ÉÉ„Éà
        function formatDateKey(date) {
            const year = date.getFullYear();
            const month = date.getMonth() + 1;
            const day = date.getDate();
            return `${year}-${month}-${day}`;
        }

        // „Ç´„É¨„É≥„ÉÄ„Éº„ÅÆÊó•‰ªò„ÇíÁîüÊàê
        function generateCalendarDays(targetDate) {
            const year = targetDate.getFullYear();
            const month = targetDate.getMonth();
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const startDate = new Date(firstDay);
            startDate.setDate(startDate.getDate() - firstDay.getDay());

            const days = [];
            const current = new Date(startDate);

            while (current <= lastDay || current.getDay() !== 0) {
                days.push(new Date(current));
                current.setDate(current.getDate() + 1);
            }

            return days;
        }

        // „Ç´„É¨„É≥„ÉÄ„Éº„ÇíÊèèÁîª
        function renderCalendar(containerId, targetDate, isMain = true) {
            const container = document.getElementById(containerId);
            if (!container) {
                console.error('„Ç≥„É≥„ÉÜ„Éä„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì:', containerId);
                return;
            }

            const days = generateCalendarDays(targetDate);
            const today = new Date();
            const currentMonth = targetDate.getMonth();

            let html = '<div class="calendar-grid' + (isMain ? '' : ' small') + '">';

            // ÊõúÊó•„Éò„ÉÉ„ÉÄ„Éº
            weekDays.forEach((day, index) => {
                let className = 'weekday-header' + (isMain ? '' : ' small');
                if (index === 0) className += ' sunday';
                if (index === 6) className += ' saturday';
                html += `<div class="${className}">${day}</div>`;
            });

            // Êó•‰ªò
            days.forEach(date => {
                const isInMonth = date.getMonth() === currentMonth;
                const isToday = isInMonth &&
                    date.getDate() === today.getDate() &&
                    date.getMonth() === today.getMonth() &&
                    date.getFullYear() === today.getFullYear();
                const dayOfWeek = date.getDay();
                const dateKey = formatDateKey(date);
                const holiday = holidays[dateKey];

                let dayClass = 'calendar-day' + (isMain ? '' : ' small');
                if (!isInMonth) dayClass += ' other-month';
                if (isToday) dayClass += ' today';

                let numberClass = 'day-number' + (isMain ? '' : ' small');
                if (!isInMonth) {
                    numberClass += ' other-month';
                } else if (holiday) {
                    numberClass += ' holiday';
                } else if (dayOfWeek === 0) {
                    numberClass += ' sunday';
                } else if (dayOfWeek === 6) {
                    numberClass += ' saturday';
                }

                html += `<div class="${dayClass}">
                    <span class="${numberClass}">${date.getDate()}</span>
                    ${holiday && isInMonth && isMain ? `<div class="holiday-name">${holiday}</div>` : ''}
                </div>`;
            });

            html += '</div>';
            container.innerHTML = html;
        }

        // „Ç¢„Éä„É≠„Ç∞ÊôÇË®à„ÅÆÈáù„ÇíÊõ¥Êñ∞
        function updateAnalogClock(now) {
            const hours = now.getHours() % 12;
            const minutes = now.getMinutes();
            const seconds = now.getSeconds();
            const hourAngle = (hours * 30) + (minutes * 0.5);
            const minuteAngle = (minutes * 6) + (seconds * 0.1);
            const secondAngle = seconds * 6;
            function getHandPosition(angle, length) {
                const radian = (angle - 90) * Math.PI / 180;
                return { x: 50 + length * Math.cos(radian), y: 50 + length * Math.sin(radian) };
            }
            const hourPos = getHandPosition(hourAngle, 24);
            const minutePos = getHandPosition(minuteAngle, 34);
            const secondPos = getHandPosition(secondAngle, 38);
            const hourHand = document.getElementById('hour-hand');
            const minuteHand = document.getElementById('minute-hand');
            const secondHand = document.getElementById('second-hand');
            if (hourHand) { hourHand.setAttribute('x2', hourPos.x); hourHand.setAttribute('y2', hourPos.y); }
            if (minuteHand) { minuteHand.setAttribute('x2', minutePos.x); minuteHand.setAttribute('y2', minutePos.y); }
            if (secondHand) { secondHand.setAttribute('x2', secondPos.x); secondHand.setAttribute('y2', secondPos.y); }
        }

        // ÊôÇÂàª„ÇíÊõ¥Êñ∞
        function updateTime() {
            const now = new Date();
            updateAnalogClock(now);
            // ÊôÇÂàª
            document.getElementById('current-time').textContent = now.toLocaleTimeString('ja-JP', {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });

            // Êó•‰ªò
            const dateElement = document.getElementById('current-date');
            const year = now.getFullYear();
            const month = now.getMonth() + 1;
            const date = now.getDate();
            const weekday = weekDays[now.getDay()];

            dateElement.innerHTML = `<span class="japanese-era">Ôºà${getJapaneseEra(now)}Ôºâ</span>${year}Âπ¥${month}Êúà${date}Êó•<span class="weekday">Ôºà${weekday}ÊõúÊó•Ôºâ</span>`;

            // ‰ªäÊó•„ÅÆÁ•ùÊó•
            const holidayKey = formatDateKey(now);
            const holidayToday = holidays[holidayKey];
            const holidayElement = document.getElementById('holiday-today');
            if (holidayToday) {
                holidayElement.textContent = `üéå ${holidayToday}`;
            } else {
                holidayElement.textContent = '';
            }
        }

        // „Ç´„É¨„É≥„ÉÄ„Éº„ÅÆ„Çø„Ç§„Éà„É´„ÇíÊõ¥Êñ∞
        function updateCalendarTitles() {
            const now = new Date();
            const prevMonth = new Date(now.getFullYear(), now.getMonth() - 1, 1);
            const nextMonth = new Date(now.getFullYear(), now.getMonth() + 1, 1);

            document.getElementById('current-month-title').textContent =
                `${now.getFullYear()}Âπ¥ ${months[now.getMonth()]}`;

            // ÂÖàÊúà„ÅÆË°®Á§∫ÔºàÂπ¥„ÅåÁï∞„Å™„ÇãÂ†¥Âêà„ÅØÂπ¥„ÇÇË°®Á§∫Ôºâ
            if (prevMonth.getFullYear() !== now.getFullYear()) {
                document.getElementById('prev-month-title').textContent =
                    `${prevMonth.getFullYear()}/${prevMonth.getMonth() + 1}`;
            } else {
                document.getElementById('prev-month-title').textContent =
                    `${prevMonth.getMonth() + 1}Êúà`;
            }

            // ÁøåÊúà„ÅÆË°®Á§∫ÔºàÂπ¥„ÅåÁï∞„Å™„ÇãÂ†¥Âêà„ÅØÂπ¥„ÇÇË°®Á§∫Ôºâ
            if (nextMonth.getFullYear() !== now.getFullYear()) {
                document.getElementById('next-month-title').textContent =
                    `${nextMonth.getFullYear()}/${nextMonth.getMonth() + 1}`;
            } else {
                document.getElementById('next-month-title').textContent =
                    `${nextMonth.getMonth() + 1}Êúà`;
            }
        }

        // „Éù„É¢„Éâ„Éº„É≠„Çø„Ç§„Éû„Éº
        let POMODORO_WORK = 25 * 60;
        const POMODORO_BREAK = 5 * 60;
        const POMODORO_LONG_BREAK = 15 * 60;
        let pomodoroTime = POMODORO_WORK;
        let pomodoroTotalTime = POMODORO_WORK;
        let pomodoroInterval = null;
        let pomodoroRunning = false;
        let pomodoroPhase = 'work';
        let pomodoroCount = 0;
        let pomodoroSessionCount = 0;

        // Web Audio API „Åß„Ç¢„É©„Éº„ÉàÈü≥„ÇíÁîüÊàê
        let audioContext = null;
        function playAlertSound() {
            try {
                if (!audioContext) {
                    audioContext = new (window.AudioContext || window.webkitAudioContext)();
                }
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
                oscillator.frequency.setValueAtTime(600, audioContext.currentTime + 0.1);
                oscillator.frequency.setValueAtTime(800, audioContext.currentTime + 0.2);
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.5);
            } catch (e) {
                console.log('Audio not supported:', e);
            }
        }

        // ÊôÇÈñì„Éó„É™„Çª„ÉÉ„ÉàÈÅ∏Êäû
        function setPresetTime(minutes) {
            if (pomodoroRunning) return;
            POMODORO_WORK = minutes * 60;
            pomodoroTime = POMODORO_WORK;
            pomodoroTotalTime = POMODORO_WORK;
            pomodoroPhase = 'work';
            updatePomodoroDisplay();
            document.querySelectorAll('.preset-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        }

        function formatPomodoroTime(seconds) {
            const m = Math.floor(seconds / 60);
            const s = seconds % 60;
            return `${String(m).padStart(2, '0')}:${String(s).padStart(2, '0')}`;
        }

        function updatePomodoroDisplay() {
            document.getElementById('pomodoro-time').textContent = formatPomodoroTime(pomodoroTime);
            const phaseEl = document.getElementById('pomodoro-phase');
            const ringEl = document.getElementById('ring-progress');

            // „Éï„Çß„Éº„Ç∫Ë°®Á§∫„Å®„Ç´„É©„Éº
            if (pomodoroPhase === 'work') {
                phaseEl.textContent = 'üî• ‰ΩúÊ•≠';
                phaseEl.className = 'pomodoro-phase work';
                if (ringEl) ringEl.className = 'ring-progress work';
            } else if (pomodoroPhase === 'break') {
                phaseEl.textContent = '‚òï ‰ºëÊÜ©';
                phaseEl.className = 'pomodoro-phase break';
                if (ringEl) ringEl.className = 'ring-progress break';
            } else {
                phaseEl.textContent = 'üå¥ Èï∑‰ºëÊÜ©';
                phaseEl.className = 'pomodoro-phase long-break';
                if (ringEl) ringEl.className = 'ring-progress long-break';
            }

            // ÂÜÜÂΩ¢„Éó„É≠„Ç∞„É¨„Çπ„É™„É≥„Ç∞„ÅÆÊõ¥Êñ∞
            if (ringEl) {
                const circumference = 2 * Math.PI * 40; // r=40
                const progress = pomodoroTime / pomodoroTotalTime;
                const offset = circumference * (1 - progress);
                ringEl.style.strokeDasharray = circumference;
                ringEl.style.strokeDashoffset = offset;
            }

            document.getElementById('pomodoro-count').textContent = `ÂÆå‰∫Ü: ${pomodoroCount}`;
        }

        function togglePomodoro() {
            const btn = document.getElementById('pomodoro-start');
            if (pomodoroRunning) {
                clearInterval(pomodoroInterval);
                pomodoroRunning = false;
                btn.textContent = 'ÂÜçÈñã';
                btn.className = 'pomodoro-btn start';
            } else {
                pomodoroRunning = true;
                btn.textContent = '‰∏ÄÊôÇÂÅúÊ≠¢';
                btn.className = 'pomodoro-btn pause';
                pomodoroInterval = setInterval(() => {
                    pomodoroTime--;
                    updatePomodoroDisplay();
                    if (pomodoroTime <= 0) {
                        clearInterval(pomodoroInterval);
                        pomodoroRunning = false;
                        onPomodoroComplete();
                    }
                }, 1000);
            }
        }

        function onPomodoroComplete() {
            if (pomodoroPhase === 'work') {
                pomodoroCount++;
                pomodoroSessionCount++;
                if (pomodoroSessionCount >= 4) {
                    pomodoroPhase = 'long-break';
                    pomodoroTime = POMODORO_LONG_BREAK;
                    pomodoroTotalTime = POMODORO_LONG_BREAK;
                    pomodoroSessionCount = 0;
                    showNotification('üéâ 4„Éù„É¢„Éâ„Éº„É≠ÂÆå‰∫ÜÔºÅ', 'Èï∑„ÇÅ„ÅÆ‰ºëÊÜ©„Çí„Å©„ÅÜ„ÅûÔºà15ÂàÜÔºâ');
                } else {
                    pomodoroPhase = 'break';
                    pomodoroTime = POMODORO_BREAK;
                    pomodoroTotalTime = POMODORO_BREAK;
                    showNotification('üçÖ „Éù„É¢„Éâ„Éº„É≠ÂÆå‰∫ÜÔºÅ', '‰ºëÊÜ©„Çí„Å©„ÅÜ„ÅûÔºà5ÂàÜÔºâ');
                }
            } else {
                pomodoroPhase = 'work';
                pomodoroTime = POMODORO_WORK;
                pomodoroTotalTime = POMODORO_WORK;
                showNotification('‚è∞ ‰ºëÊÜ©ÁµÇ‰∫ÜÔºÅ', 'Ê¨°„ÅÆ‰ΩúÊ•≠„ÇíÂßã„ÇÅ„Åæ„Åó„Çá„ÅÜ');
            }
            updatePomodoroDisplay();
            document.getElementById('pomodoro-start').textContent = 'ÈñãÂßã';
            document.getElementById('pomodoro-start').className = 'pomodoro-btn start';
        }

        function resetPomodoro() {
            clearInterval(pomodoroInterval);
            pomodoroRunning = false;
            pomodoroPhase = 'work';
            pomodoroTime = POMODORO_WORK;
            pomodoroTotalTime = POMODORO_WORK;
            pomodoroSessionCount = 0;
            updatePomodoroDisplay();
            document.getElementById('pomodoro-start').textContent = 'ÈñãÂßã';
            document.getElementById('pomodoro-start').className = 'pomodoro-btn start';
        }

        function showNotification(title, message) {
            playAlertSound();
            document.getElementById('notification-title').textContent = title;
            document.getElementById('notification-message').textContent = message;
            document.getElementById('pomodoro-notification').style.display = 'block';
            if ('Notification' in window && Notification.permission === 'granted') {
                new Notification(title, { body: message });
            }
        }

        function dismissNotification() {
            document.getElementById('pomodoro-notification').style.display = 'none';
        }

        // ÂàùÊúüÂåñ„Å®Êõ¥Êñ∞
        function init() {
            // ÁèæÂú®„ÅÆÊó•ÊôÇ„ÇíÂèñÂæó
            const now = new Date();
            let currentDay = now.getDate();

            updateTime();
            updateCalendarTitles();
            updatePomodoroDisplay();

            const prevMonth = new Date(now.getFullYear(), now.getMonth() - 1, 1);
            const nextMonth = new Date(now.getFullYear(), now.getMonth() + 1, 1);

            renderCalendar('current-calendar', now, true);
            renderCalendar('prev-calendar', prevMonth, false);
            renderCalendar('next-calendar', nextMonth, false);

            // ÊØéÁßíÊôÇÂàª„ÇíÊõ¥Êñ∞
            setInterval(updateTime, 1000);

            // ÊØéÂàÜ„Ç´„É¨„É≥„ÉÄ„Éº„ÇíÊõ¥Êñ∞ÔºàÊó•‰ªò„ÅåÂ§â„Çè„Å£„ÅüÊôÇ„ÅÆ„Åü„ÇÅÔºâ
            setInterval(() => {
                const currentNow = new Date();
                const currentPrevMonth = new Date(currentNow.getFullYear(), currentNow.getMonth() - 1, 1);
                const currentNextMonth = new Date(currentNow.getFullYear(), currentNow.getMonth() + 1, 1);

                // Êó•‰ªò„ÅåÂ§â„Çè„Å£„Åü„Çâ„É™„Çª„ÉÉ„Éà
                if (currentNow.getDate() !== currentDay) {
                    currentDay = currentNow.getDate();
                }

                updateCalendarTitles();
                renderCalendar('current-calendar', currentNow, true);
                renderCalendar('prev-calendar', currentPrevMonth, false);
                renderCalendar('next-calendar', currentNextMonth, false);
            }, 60000);
        }

        // „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÊôÇ„Å´ÂàùÊúüÂåñ
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
